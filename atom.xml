<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Cairo Noleto]]></title>
  <link href="http://caironoleto.github.com/atom.xml" rel="self"/>
  <link href="http://caironoleto.github.com/"/>
  <updated>2014-08-30T19:58:29-03:00</updated>
  <id>http://caironoleto.github.com/</id>
  <author>
    <name><![CDATA[Cairo Noleto]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[O que eu não curti em go]]></title>
    <link href="http://caironoleto.github.com/2014/08/30/o-que-eu-nao-curti-em-go/"/>
    <updated>2014-08-30T07:12:00-03:00</updated>
    <id>http://caironoleto.github.com/2014/08/30/o-que-eu-nao-curti-em-go</id>
    <content type="html"><![CDATA[<p>O título desse artigo poderia ser &#8220;Minhas impressões sobre go&#8221;. Mas não, esse tipo de artigo é fácil encontrar por aí :)</p>

<p>Enfim, das coisas que eu não curti em go, uma delas é a forma como você lida com atribuições de um resultado do banco de dados.</p>

<p>Por exemplo:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>package main
</span><span class='line'>
</span><span class='line'>import (
</span><span class='line'>  "database/sql"
</span><span class='line'>  "errors"
</span><span class='line'>  "fmt"
</span><span class='line'>  _ "github.com/lib/pq"
</span><span class='line'>  "os"
</span><span class='line'>)
</span><span class='line'>
</span><span class='line'>type Category struct {
</span><span class='line'>  Id       int64
</span><span class='line'>  Name     string
</span><span class='line'>  ParentId int64
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>const (
</span><span class='line'>  FIND_SQL = `SELECT id, name, parent_id FROM categories WHERE id = $1`
</span><span class='line'>)
</span><span class='line'>
</span><span class='line'>func connection() *sql.DB {
</span><span class='line'>  db, err := sql.Open("postgres", os.Getenv("DATABASE_URL"))
</span><span class='line'>  if err != nil {
</span><span class='line'>      fmt.Println("Error: ", err)
</span><span class='line'>  }
</span><span class='line'>  return db
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>func FindCategory(id int64) (Category, error) {
</span><span class='line'>  db := connection()
</span><span class='line'>  var parentId sql.NullInt64
</span><span class='line'>  category := Category{}
</span><span class='line'>
</span><span class='line'>  err := db.QueryRow(FIND_SQL, id).Scan(&category.Id, &category.Name, &parentId)
</span><span class='line'>
</span><span class='line'>  if err != nil {
</span><span class='line'>      fmt.Println("Error: ", err)
</span><span class='line'>  }
</span><span class='line'>
</span><span class='line'>  if parentId.Valid {
</span><span class='line'>      category.ParentId = parentId.Int64
</span><span class='line'>  }
</span><span class='line'>
</span><span class='line'>  switch {
</span><span class='line'>  case err == sql.ErrNoRows:
</span><span class='line'>      return category, errors.New("Record Not Found")
</span><span class='line'>  case err != nil:
</span><span class='line'>      return category, errors.New(err.Error())
</span><span class='line'>  }
</span><span class='line'>
</span><span class='line'>  return category, nil
</span><span class='line'>}
</span><span class='line'>
</span><span class='line'>func main() {
</span><span class='line'>  category, err := FindCategory(1)
</span><span class='line'>
</span><span class='line'>  if err == nil {
</span><span class='line'>      fmt.Println(category)
</span><span class='line'>  }
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>No código acima, no seguinte trecho:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>if parentId.Valid {
</span><span class='line'>  category.ParentId = parentId.Int64
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>O que acontece é que após a consulta, eu preciso verificar se o <code>parentId</code> que é retornado na consulta é válido, se ele for, só aí eu atribuo o <code>category.ParentId</code>.</p>

<p>Esse tipo de tratamento, eu não curto.</p>

<p>Infelizmente go tem dessas, várias e várias vezes você precisa fazer esse tipo de verificação para poder continuar.</p>

<p>Uma outra coisa que eu não curto é a organização de arquivos do código em go, saca só:</p>

<p><img src="http://monosnap.com/image/TyjibjnO3s2rNQHxvsWhAGW5eL1J90.png" alt="example" /></p>

<p>Fica tudo dentro da raiz do projeto, não existe organização por diretórios. Para quem é acostumado com a estrutura de projetos em Rails é um martírio!</p>

<p>Que eu me lembre são esses pontos. Depois eu faço um artigo contando o que eu curto em go que sinto falta em outras linguagens.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[RubyConf Brasil 2013]]></title>
    <link href="http://caironoleto.github.com/2013/09/01/rubyconf-brasil-2013/"/>
    <updated>2013-09-01T09:43:00-03:00</updated>
    <id>http://caironoleto.github.com/2013/09/01/rubyconf-brasil-2013</id>
    <content type="html"><![CDATA[<p>Por incrível que pareça, essa foi a minha primeira RubyConf Brasil! O mais engraçado nisso, é que estou na comunidade desde 2009 e nunca tive uma oportunidade de ir.</p>

<p>Nos anos anteriores acompanhei quase tudo pela Eventials, mas esse ano vi ali ao vivo algumas palestras. Algumas porquê tive motivos profissionais que conflitaram com algumas palestras.</p>

<p>Sobre as palestras, não tenho muito o que falar. Elas foram ok, algumas apresentaram alguma coisa nova.</p>

<p>Mas a parte mais importante foram as pessoas. Cada uma das que fizeram esse evento funcionar, as que foram lá prestigiar e esse foi o maior motivo que me fez querer ir para a RubyConf.</p>

<p>Tive oportunidade de rever amigos que há tempos não via, também conheci pessoas com quem trabalhei na minha antiga empresa e conheci pessoalmente aquelas que só conhecemos por avatares!</p>

<p>Não vá para um evento apenas para ver as palestras, vá para conhecer as pessoas, conversar, discutir sobre tecnologia e tudo mais!</p>

<p>P. S. Sempre leve uma roupa de frio pra São Paulo, ela sempre vai ter surpreender :P</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[PORO - Pure Old Ruby Object]]></title>
    <link href="http://caironoleto.github.com/2012/04/15/poro-pure-old-ruby-object/"/>
    <updated>2012-04-15T09:43:00-03:00</updated>
    <id>http://caironoleto.github.com/2012/04/15/poro-pure-old-ruby-object</id>
    <content type="html"><![CDATA[<h2>Este post foi escrito no README de um <a href="https://github.com/caironoleto/Criptografia">projeto</a> depois de um refactoring.</h2>

<p>Hoje, no dia 22 de janeiro de 2011, resolvi fazer um refactoring neste código e explicar mais sobre uma dúvida que o <a href="https://github.com/dannlucioano">dannluciano</a> me perguntou no twitter de como estavamos usando PORO em nossos projetos na <a href="https://github.com/nohupbrasil">Nohup</a>.</p>

<p>Para começarmos, PORO é um acrônimo para Pure Old Object Ruby, que é mais um movimento da comunidade Ruby em trazer de volta aquelas velhas classes puras do Ruby.</p>

<p>E como tudo na comunidade Ruby onde cada movimento vem com uma pitada de amadurecimento, com os POROs não podia ser diferente. Além de resgatar a utilização de classes puras do Ruby, sem ter que herdar (na sua grande maioria do ActiveRecord) de nenhuma outra classe, o uso dos POROs é para poder aplicar os conceitos de SOLID que o Uncle Bob introduziu no desenvolvimento de software e que o Lucas Húngaro explanou muito bem em uma série de blog posts que cobre os 5 princípios de SOLID e de como aplicá-los em Ruby.</p>

<p>O conceito de SOLID mais forte no uso de POROs é o de <a href="http://blog.lucashungaro.com/2011/05/04/solid-ruby-single-responsibility-principle/">Single Responsibility</a>, onde cada classe tem apenas uma única responsabilidade. Neste refactoring, a classe Cripto tinha a responsabilidade de criptografar e descriptografar um texto. Só que ele também tinha a responsabilidade de saber o dicionário de criptografia.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Cripto</span>
</span><span class='line'>  <span class="c1"># Responsabilidade de criptografar  </span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">cripto</span>
</span><span class='line'>    <span class="c1"># …</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Responsabilidade de descriptografar</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">decript</span>
</span><span class='line'>    <span class="c1"># …</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># Responsabilidade de saber o dicionário</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">dicionario</span>
</span><span class='line'>    <span class="c1"># …</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Fonte: <a href="https://github.com/caironoleto/Criptografia/blob/79236001445a2e04312825668f99114d80d849f1/lib/cripto.rb">79236001445a2e04312825668f99114d80d849f1</a></p>

<p>Meu refactoring nesta classe foi em retirar o dicionário da classe Cripto e de usar outro princípio do SOLID, que é o de <a href="http://blog.lucashungaro.com/2011/05/09/solid-ruby-dependency-inversion-principle/">Dependecy Inversion</a>, para preparar a classe Cripto a aceitar qualquer objeto que respondam a <code>Object#[]</code> e <code>Object#key</code>.</p>

<p>Neste caso então eu posso utilizar a class Hash, que implementa esses métodos, ou qualquer outra classe que eu possa criar e no caso eu criei a classe Dictionary.</p>

<p>E a implementação final da classe Cripto ficou da sequinte forma:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">Cripto</span>
</span><span class='line'>  <span class="kp">attr_accessor</span> <span class="ss">:dictionary</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">dictionary</span><span class="p">)</span>
</span><span class='line'>    <span class="nb">self</span><span class="o">.</span><span class="n">dictionary</span> <span class="o">=</span> <span class="n">dictionary</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">encrypt</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span class='line'>    <span class="n">process</span><span class="p">(</span><span class="ss">:[]</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">decrypt</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span class='line'>    <span class="n">process</span><span class="p">(</span><span class="ss">:key</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="kp">private</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="nb">method</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
</span><span class='line'>    <span class="n">processed_text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span class='line'>    <span class="n">text</span><span class="o">.</span><span class="n">each_char</span> <span class="k">do</span> <span class="o">|</span><span class="n">ch</span><span class="o">|</span>
</span><span class='line'>      <span class="n">processed_text</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="n">dictionary</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="nb">method</span><span class="p">,</span> <span class="n">ch</span><span class="p">)</span> <span class="o">||</span> <span class="n">ch</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>    <span class="n">processed_text</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Fonte: <a href="Fonte:%20https://github.com/caironoleto/Criptografia/blob/dfeecf4c00590b027017514723329562a46fa9d0/lib/cripto.rb">dfeecf4c00590b027017514723329562a46fa9d0</a></p>

<h2>Aplicando esses conceitos em uma aplicação Rails</h2>

<p>Eu falei antes que na Nohup nós não estamos utilizando callbacks, assim como reuniões, callbacks são tóxicos! No lugar deles, estamos usando POROs com a responsabilidade de fazer o que seria feito pelo callback e chamando nas actions onde eles seriam executados.</p>

<p>Uma coisa bastante comum em aplicações Rails é a geração de slugs. A regra mais comum para geração do slug é de sempre que o nome do usuário for passado pelo formulário para ser alterado, ele deve gerar um novo slug. A implementação mais comum é:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
</span><span class='line'>  <span class="n">before_save</span> <span class="ss">:slugify</span>
</span><span class='line'>
</span><span class='line'>  <span class="kp">private</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">slugify</span>
</span><span class='line'>    <span class="nb">self</span><span class="o">.</span><span class="n">slug</span> <span class="o">=</span> <span class="nb">name</span><span class="o">.</span><span class="n">parameterize</span><span class="o">.</span><span class="n">to_s</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Essa abordagem fere um dos princípios que comentei anteriormente. A classe User deixa de ter somente a responsabilidade de lidar com os dados e adiciona a responsabilidade de gerar o slug sempre que o usuário for salvo.</p>

<p>A primeira coisa que fazemos nesse caso é extrair nossa regra de negócio para um PORO. Poderíamos fazer da seguinte forma:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="k">class</span> <span class="nc">SlugGenerator</span>
</span><span class='line'>    <span class="kp">attr_accessor</span> <span class="ss">:slug</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">slug</span><span class="p">)</span>
</span><span class='line'>      <span class="nb">self</span><span class="o">.</span><span class="n">slug</span> <span class="o">=</span> <span class="n">slug</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">slugify!</span>
</span><span class='line'>      <span class="n">slug</span><span class="o">.</span><span class="n">parameterize</span><span class="o">.</span><span class="n">to_s</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Então para finalizar, essa regra de negócio deve sempre ser executada quando o usuário for criado ou quando for atualizado, então nós alteramos o controller de <code>users</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">UsersController</span> <span class="o">&lt;</span> <span class="no">ActionController</span><span class="o">::</span><span class="no">Base</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">create</span>
</span><span class='line'>    <span class="vi">@user</span> <span class="o">=</span> <span class="no">User</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:user</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="vi">@user</span><span class="o">.</span><span class="n">slug</span> <span class="o">=</span> <span class="no">SlugGenerator</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="vi">@user</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">slugify!</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># …</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">update</span>
</span><span class='line'>    <span class="vi">@user</span> <span class="o">=</span> <span class="no">User</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">params</span><span class="o">[</span><span class="ss">:id</span><span class="o">]</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="vi">@user</span><span class="o">.</span><span class="n">slug</span> <span class="o">=</span> <span class="no">SlugGenerator</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="vi">@user</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">slugify!</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1"># …</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>:
Em muitos lugares diferentes da aplicação nós podemos salvar esse objeto e não necessariamente nós precisamos aplicar a regra de gerar um novo slug. O que geralmente acontece é que no uso de callbacks, você acaba tendo comportamentos inesperados na hora de salvar um objeto.</p>

<p>Daí na Nohup nós acabamos criando uma convenção, onde uma regra de negócio não deve ficar no model e sim em um PORO e que só deve ser executado nas actions que tem necessidade.</p>

<p>E ficamos com uma estrutura de diretórios assim:</p>

<p><img src="https://img.skitch.com/20120123-n9ypqgy419ds8urqmj1ywgu6p6.png" alt="app" /></p>

<p>Obviamente, dentro do diretório <code>business</code> estão todos os POROs com todas as regras de negócio da aplicação. Nossos models são bem simples, contendo apenas a lógica para lidar com os dados (validações, escopos de busca, etc) e toda as regras de negócio ficam dentro de <code>business</code>.</p>

<p>Espero que isso ajude a você a repensar melhor no design da sua aplicação.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Realmente existe diferença entre TDD e BDD?]]></title>
    <link href="http://caironoleto.github.com/2011/07/10/realmente-existe-diferenca-entre-tdd-e-bdd/"/>
    <updated>2011-07-10T00:00:00-03:00</updated>
    <id>http://caironoleto.github.com/2011/07/10/realmente-existe-diferenca-entre-tdd-e-bdd</id>
    <content type="html"><![CDATA[<p>Recebi um comentário do Cândido Sales que me fez reler um texto meu antigo sobre <a href="http://caironoleto.github.com/2008/06/11/diferenca-entre-tdd-e-bdd">a diferença entre TDD e BDD</a>. Achei legal, interessante, mas vale a pena escrever mais um &#8220;dedinho&#8221; de palavras e incluir agora minha experiência de se usar TDD/BDD por algum tempo (Uns 2 anos, mais ou menos)!</p>

<p>Depois de toda a experiência que tenho hoje com desenvolvimento orientado a testes/comportamento vejo que não existe muita diferença entre as técnicas. Acredito, como já acreditava, que BDD faz parte da evolução de quem começa a praticar TDD.</p>

<p>Mas a parte mais importante, é que no final, essas duas técnicas não são apenas para testar a sua aplicação. Hoje considero que mais importante do que testar a aplicação é:</p>

<ul>
<li>Fazer um design consciente da sua aplicação;</li>
<li>Melhorar a manutenção com a facilidade de se fazer refactoring! (Refactoring sem testes não é refactoring).</li>
</ul>


<h3>Design consciente:</h3>

<p>Quando vamos desenvolver algum código, não temos ainda uma opinião forte de como deve ser esse novo código. Então praticamente não sabemos ainda nomes de classe, métodos, rotinas…</p>

<p>Então TDD/BDD entra para nos ajudar a modelar no inicio do desenvolvimento de nossa API. Se você considerar o desenvolvimento em baby steps, então teremos uma API que evolua naturalmente conforme nossa aplicação vai crescendo. E a base dessa evolução são os testes que criamos antes e que nos dá segurança no desenvolvimento.</p>

<h3>Refactoring:</h3>

<p>Refactoring é rescrever nossa API de forma mais simplificada e que os testes continuem passando e devemos evoluir nossos testes para acompanhar essa simplificação. Sem os testes não temos como garantir que essas alterações que visam simplificar o código continuem funcionando, por isso refactoring sem testes não é refactoring.</p>

<h3>Conclusão</h3>

<p>Hoje considero TDD e BDD como duas formas diferentes de design da aplicação e que você realmente deve estuda-lás (Ou escolher uma :P) e melhorar o design do seu código.</p>

<p>Não vejo muitas diferenças em se utilizar TDD ou BDD e que vai mais da escolha pessoal do programador ou da sua equipe. E que o mais importante, é que se você está usando alguma dessas técnicas, então isso demonstra que você já tem uma preocupação com a qualidade do código que você escreve.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Proc e lambda]]></title>
    <link href="http://caironoleto.github.com/2011/04/01/proc-e-lambda/"/>
    <updated>2011-04-01T00:00:00-03:00</updated>
    <id>http://caironoleto.github.com/2011/04/01/proc-e-lambda</id>
    <content type="html"><![CDATA[<p>Você já deve ter ouvido que tudo em Ruby é objeto. Sim, sim, tudo é objeto. Menos blocos.</p>

<p>Blocos não são objetos. Mas existe duas formas de transformar blocos em objetos. Uma é usar Proc e a outra é usa lamda.</p>

<p>Para se criar um Proc existem algumas formas, a mais simples e mais utilizada é:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">proc</span> <span class="o">=</span> <span class="no">Proc</span><span class="o">.</span><span class="n">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">object</span><span class="o">|</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="n">object</span><span class="o">.</span><span class="n">inspect</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Depois que você criar o seu Proc, para chamar o bloco que você acabou de criar, você deve utilizar o método call:</p>

<p><code>proc.call Object</code></p>

<p>O método call é chamado para executar o bloco. Em blocos, vocês podem fazer o que quiser. Um caso interessante é para processamento sequencial. No rails é bastante utilizado na definição de named scopes.</p>

<p>Outra forma de fazer blocos virarem objetos é utilizar o lambda:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">lambda</span> <span class="o">=</span> <span class="nb">lambda</span> <span class="k">do</span> <span class="o">|</span><span class="n">object</span><span class="o">|</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="n">object</span><span class="o">.</span><span class="n">inspect</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Basicamente, Proc e lambda funcionam da mesma forma. Mas existe uma diferença, que é no caso de se utilizar controles de fluxo, no caso return, break, redo, retry e vários outros.</p>

<p>O problema nesse caso é que esses controles de fluxo quebram quando você está utilizando Proc.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Leia antes de lançar um produto]]></title>
    <link href="http://caironoleto.github.com/2011/03/29/leia-antes-de-lancar-um-produto/"/>
    <updated>2011-03-29T00:00:00-03:00</updated>
    <id>http://caironoleto.github.com/2011/03/29/leia-antes-de-lancar-um-produto</id>
    <content type="html"><![CDATA[<p>Qual a sua definição de um bom produto? Ele tem que ser funcional?! Ele tem que ser útil?! Ou ele tem que despertar em você uma necessidade?</p>

<p>Todos falam sobre os produtos da Apple, sobre como o Steve Jobs consegue criar a necessidade e como todos acabam comprando (Eu sou um deles!).</p>

<p>Não importa o quanto revolucionário é o seu produto. Se ele não despertar a necessidade nos seus clientes, você não irá fazer sucesso. E a melhor maneira de despertar a necessidade é criando um fucking awesome produto!</p>

<p>Uau! Você chegou até aqui e com certeza nada do que você leu é novidade. Estou apenas pensando sobre um assunto que sempre é recorrente, principalmente se você é empreendedor.</p>

<p>Se você está fazendo um produto agora, que lançou um produto ou que ainda vai lançar um novo produto nunca esqueça de que antes da arquitetura da sua aplicação ou o quão rápido ela deve ser, o mais importante é que ela seja espetacularmente lindo e que tenha a melhor usabilidade ever.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Ruby Masters Conf]]></title>
    <link href="http://caironoleto.github.com/2011/01/11/ruby-masters-conf/"/>
    <updated>2011-01-11T00:00:00-03:00</updated>
    <id>http://caironoleto.github.com/2011/01/11/ruby-masters-conf</id>
    <content type="html"><![CDATA[<p>Eis que mais uma vez a e-Genial surpreende anunciando o <a href="http://rubymastersconf.com">Ruby Masters Conf</a>, que é uma maratona de palestras com os maiores feras de Ruby do Brasil e ainda com convidados internacionais!</p>

<p>A e-Genial é conhecida no Brasil pela excelência dos seus cursos (Já <a href="http://egenial.com.br/nosql">ministrei</a> um por lá \o/) e também conhecida por ter uma das melhores plataformas de ensino a distância do país, o TreinaTom.</p>

<p>O evento vai ser todo através do TreinaTom, com a possibilidade de você conhecer muita gente boa e no final poder ter as palestras sempre que você quiser, tudo vai ser gravado e disponibilizado para quem se inscrever!</p>

<p>O Ruby Masters Conf é um evento para espalhar conhecimento e ajudar projetos OpenSource. Foi escolhidos dois projetos, o <a href="http://rubyinstaller.org">RubyInstaller</a>, para quem usa windows, e o <a href="http://modrails.com">Passenger</a>, dos carinhas da Phusion.</p>

<p>O RubyInstaller é um binário executável que faz todo o processo de instalação do Ruby no Windows. É bastante usado pelos alunos da e-Genial nos cursos de Rails ministrado pelo Daniel Lopes.</p>

<p>Já o Passenger é usado na hora de colocar sua aplicação em produção por quase todos os grandes players do Brasil e do Mundo.</p>

<p>Esses dois projetos são muito importantes, o primeiro por permitir que a simplicidade do Ruby chegue na complexidade que é o Windows e com todas aquelas telas azuis, e o segundo por fazer o deployment de aplicações Ruby (Só precisa ser Rack!) ser mais simples como é muito coisa no Ruby!</p>

<p>Eu já estou divulgando por aqui e nos vemos no Ruby Masters Conf!</p>

<p>:D</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Meu ambiente de desenvolvimento em 7 itens]]></title>
    <link href="http://caironoleto.github.com/2010/12/27/meu-ambiente-de-desenvolvimento-em-7-itens/"/>
    <updated>2010-12-27T00:00:00-03:00</updated>
    <id>http://caironoleto.github.com/2010/12/27/meu-ambiente-de-desenvolvimento-em-7-itens</id>
    <content type="html"><![CDATA[<p>Fui convidado pelo <a href="http://twitter.com/danillos" target="_blank">@danillos</a> para descrever mais sobre o meu ambiente de trabalho :)</p>

<h3>1. Sistema operacional</h3>

<p>Mac OS X e Ubuntu.</p>

<p>E já estou indo para o meu terceiro ano com Mac OS, simplesmente fantástico, não só pelo software, mas pelo casamento com o hardware. E o Ubuntu ainda tenho em um desktop que as vezes eu utilizo no <a href="http://jus.com.br">Jusplex</a>, sinceramente não muito, mas uso.</p>

<h3>2. Terminal</h3>

<p>Indispensável. Abre junto com a inicialização do sistema operacional e continua até ser desligado.</p>

<h3>3. Git</h3>

<p>Se você ainda não usa nenhum tipo de controle de versão, você merece ser marcado com brasa quente! Não passe pelo mesmo problema que o Jonny Ken teve nesse ano de 2010.</p>

<h3>4. TDD/BDD</h3>

<p>&#8220;Test all the f*cking time&#8221; é um &#8220;vício&#8221; que surgiu na comunidade Ruby e quando você vai pra outra linguagem percebe o quanto isso é importante no dia a dia em desenvolvimento.</p>

<h3>5. Editor de texto</h3>

<p>Vim/TextMate. Atualmente entrei na modinha do vim, então resolvi dar o braço a torcer por ele e ele é realmente legal (E funciona da mesma forma no Linux e no Mac OS X). O TextMate consegue ser a killer app de editores no Mac OS X, fantástico!</p>

<p>Se você precisar mais do que isso, você é um Javeiro que só consegue fazer as coisas usando o Eclipse! :trollface:</p>

<h3>6. Google Chrome</h3>

<p>Preciso de memória, eu sempre estou com um monte de coisa aberto, e sempre tem uma aba no Gmail, que pesa muito depois de muito tempo aberto.</p>

<p>Testei todos os browsers suportados no Mac OS X, e o que me deu a melhor resposta foi o Google Chrome.</p>

<p>Funciona sobre o WebKit, existe uma boa ferramenta para desenvolvimento e recentemente abriu a app store.</p>

<h3>7. Água</h3>

<p>Combustível diário para desenvolvimento. Sem água nada funciona.</p>

<p>Para continuar a série eu convido o <a href="http://blog.areacriacoes.com.br">Daniel Lopes</a>, o <a href="http://www.vedovelli.com.br">Vedovelli</a> e o <a href="http://cassiomarques.wordpress.com">Cássio Marques</a>!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Extraindo informações usando Ruby]]></title>
    <link href="http://caironoleto.github.com/2010/06/29/extraindo-informacoes-usando-ruby/"/>
    <updated>2010-06-29T00:00:00-03:00</updated>
    <id>http://caironoleto.github.com/2010/06/29/extraindo-informacoes-usando-ruby</id>
    <content type="html"><![CDATA[<p>Hoje lancei <a href="http://hackmarkoapp.heroku.com">uma aplicação</a> que faz a análise dos palpites de um bolão (<a href="http://www.bolaodamarko.com.br">O bolão da Marko Informática</a>) e mostra um gráfico com a quantidade de palpites por placa em um determinado jogo.</p>

<p>Para extrair essas informações eu não precisei acessar o banco de dados. Apenas consumi o que todos já podem ver, como por exemplo este <a href="http://www.bolaodamarko.com.br/palpitejogo.php?jogo=84">link</a>.</p>

<p>Essa brincadeira de extrair essas informações do bolão da Marko Informática começou com uma dúvida da minha esposa se tinha condição de ver no site os palpites dos outros participantes. Em menos de cinco minutos depois eu vi que tinha a possibilidade de ver essa informação, mas que infelizmente para mim é irrelevante.</p>

<p>Essa informação é desorganizada e não vai me ajudar a tomar uma decisão quanto aos meus palpites. Para mim é mais importante ter esses dados sumarizados de forma que eu não perca tempo analisando todos os palpites, um por um. Então, organizar a informação para que eu saiba quantos apostaram em 2x1 é mais interessante do que ter que contabilizar isso manualmente.</p>

<p>Para fazer isso em ruby eu utilizo a <code>gem nokogiri</code>, que faz justamente a análise e busca em html/xml. Com ela eu posso facilmente consumir o conteúdo de uma página e extrair os dados que realmente importa.</p>

<p>Nada muito complexo de se aprender, como você pode ver <a href="http://gist.github.com/457000">aqui</a>.</p>

<p>Eu pensei em fazer usando o Rails 3, mas depois de fazer o primeiro protótipo, vi que não seria necessária algo tão grande, então tirei o Rails e coloquei o Sinatra.</p>

<p>Para montar o gráfico eu perguntei no Twitter quem indicaria bibliotecas js que fizessem Chart. Depois de olhar todas, a do <a href="http://code.google.com/apis/charttools/index.html">Google Charts</a> foi a que eu achei mais simples e sem burocracia para colocar no site.</p>

<p>E por fim, para fazer deploy da aplicação eu usei o Heroku, que é um serviço Cloud para aplicações em Ruby.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Trabalhando com datas naturalmente com Chronic]]></title>
    <link href="http://caironoleto.github.com/2010/06/17/trabalhando-com-datas-naturalmente-com-chronic/"/>
    <updated>2010-06-17T00:00:00-03:00</updated>
    <id>http://caironoleto.github.com/2010/06/17/trabalhando-com-datas-naturalmente-com-chronic</id>
    <content type="html"><![CDATA[<p>Esta semana passei gastando um tempão implementando um Parser que me retornaria um dia em que um evento ocorre em uma determinada data.</p>

<p>Mas a data seria algo &#8220;Quero trazer todos os usuários que se cadastraram na terceira terça feira do mês de janeiro&#8221;. A forma que eu estava implementando não era assim tão segura, apesar de todos os testes estarem passando.</p>

<p>Então hoje eu encontro o <a href="http://chronic.rubyforge.org">Chronic</a>. É uma gem ruby que faz justamente o que eu precisava:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">005</span><span class="p">:</span><span class="mo">00</span><span class="o">&gt;</span> <span class="no">Chronic</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="s2">&quot;3rd tuesday in january&quot;</span><span class="p">,</span> <span class="ss">:context</span> <span class="o">=&gt;</span> <span class="ss">:past</span><span class="p">)</span>
</span><span class='line'><span class="o">=&gt;</span> <span class="no">Tue</span> <span class="no">Jan</span> <span class="mi">19</span> <span class="mi">12</span><span class="p">:</span><span class="mo">00</span><span class="p">:</span><span class="mo">00</span> <span class="o">-</span><span class="mo">0300</span> <span class="mi">2010</span>
</span></code></pre></td></tr></table></div></figure>


<p>Simples e rápido.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Sincronizando bancos MySQL com Maatkit]]></title>
    <link href="http://caironoleto.github.com/2010/06/14/sincronizando-bancos-mysql-com-maatkit/"/>
    <updated>2010-06-14T00:00:00-03:00</updated>
    <id>http://caironoleto.github.com/2010/06/14/sincronizando-bancos-mysql-com-maatkit</id>
    <content type="html"><![CDATA[<p>Maatkit é uma ferramenta criada para DBAs, programadores e usuários que lidam com bancos de dados opensource em replicação master-master e master-slave.</p>

<p>A maioria das ferramentas foi feita para o MySQL, mas você pode utilizar em seu banco de dados preferido (Não sei quais seriam esses outros bancos :P).</p>

<p>Uma das ferramentas do Maatkit é a sincronização entre bancos de dados. Ela é extremamente útil quando você tem bancos de dados MySQL replicados, sendo ele na configuração master-master ou master-slave.</p>

<p>Após instalado (debian like é apt-get install maatkit) você pode fazer o seguinte comando:</p>

<p><code>mk-table-sync --execute --synctomaster --verbose</code></p>

<p><code>mk-table-sync</code> é um dos executáveis que ele instala junto com vários outros.</p>

<p>Para sincronizar dois bancos sem ser master-slave você pode fazer da seguinte forma:</p>

<p><code>mk-table-sync --execute u=user,p=pass,h=host1,D=db,t=tbl host2</code></p>

<p>Se você que mais detalhes e ver os outros executáveis, visite o <a href="http://www.maatkit.org">site do projeto</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Mais teorias sobre testes]]></title>
    <link href="http://caironoleto.github.com/2010/06/01/mais-teorias-sobre-testes/"/>
    <updated>2010-06-01T00:00:00-03:00</updated>
    <id>http://caironoleto.github.com/2010/06/01/mais-teorias-sobre-testes</id>
    <content type="html"><![CDATA[<p>Atualmente eu trabalho em basicamente duas aplicações: a do Jus Navigandi e o TrendTime. São duas aplicações Ruby On Rails, bem distintas, nessas duas aplicações eu faço testes.</p>

<p>Mas são níveis de testes diferentes, infelizmente. Enquanto que na aplicação do Jus Navigandi eu não escrevo código sem testes, na do TrendTime eu ignoro alguns lugares.</p>

<p>Eu faço isso por um único motivo: No Jus Navigandi o código <strong>não é meu</strong>, não é uma aplicação minha. Justamente por isso eu não posso arriscar em escrever códigos sem testes, sem ter um mínimo de qualidade aceitável. No TrendTime parte da aplicação foi feita sem testes, só no &#8220;olhômetro&#8221;. Claro que temos uma suíte de testes, mas ela não cobre a aplicação 100%.</p>

<p>Eu faço isso por quê no TrendTime eu posso errar e voltar atrás, enquanto que na aplicação do Jus Navigandi eu não posso cometer esse mesmo deslize. O código não é meu, o código é do Jus Navigandi, e como o código faz parte da empresa, o código tem que refletir a qualidade que é o Jus Navigandi.</p>

<p>O Jus Navigandi é uma empresa em excelência nos artigos publicados, é uma revista jurídica, como tal não é qualquer texto que entra lá. Existe uma bancada de pessoas que analisa todos os textos no dia a dia e apenas os melhores textos é que são selecionados.</p>

<p>Nós programadores temos que levar essa qualidade para dentro do coração do Jus Navigandi, o código tem que refletir a mesma qualidade com que os textos do Jus Navigandi são aceitos. O código tem que ser bom, o código tem que ser limpo e o código tem que ter testes (ciclo vicioso de qualidade).</p>

<p>Quando eu navego pelo github, por vários projetos, a primeira coisa que eu faço é descer a barra de rolagem e procuro por test ou spec. Faço isso pra saber se o criador daquela biblioteca teve pelo menos o trabalho de fazer alguns testes naquele código. Faço isso porquê eu, como um desenvolvedor que vai usar aquele código, fico mais tranquilo em saber que a biblioteca possui testes. Por conta disso, posso codificar com mais tranquilidade e se alguma coisa acontecer, vou primeiro verificar meus testes/códigos.</p>

<p>Assim como as bibliotecas que eu vou escrever, se eu não fizer os testes, vou passar menos confiança para quem possivelmente vai utiliza-la. Aprendi que na comunidade Ruby On Rails, os testes expressam mais do que os códigos. Se eu quiser saber como uma biblioteca realmente funciona, eu não preciso necessariamente criar algo com aquele código, eu posso ver a suíte de testes e me situar sobre aquela biblioteca.</p>

<p>Em uma empresa que você faz parte do time, é essencial que você passe tranquilidade para os outros programadores, sejam eles pessoas que já trabalhe com você ou um novo programador que vai ajudar o seu time.</p>

<p>Com uma suíte de testes, você tem a oportunidade de mudar tudo, arrumar e deixar como era antes. Por exemplo, mudar de SQL para NoSQL e sua aplicação continuar a mesma.</p>

<p>A melhor forma de você passar confiança para outros programadores é fazendo testes e cobrindo sua aplicação de testes. São eles que vão te salvar no dia que você vai ter que mudar a regra de negócio. São os testes que vão te guiar para uma solução simples.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Migração finalizada!]]></title>
    <link href="http://caironoleto.github.com/2010/03/28/migracao-finalizada/"/>
    <updated>2010-03-28T00:00:00-03:00</updated>
    <id>http://caironoleto.github.com/2010/03/28/migracao-finalizada</id>
    <content type="html"><![CDATA[<p>Nesta semana fiz duas migrações, uma importante e outra super mega ulta importante. A primeira é que acabei de migrar todos os posts do Wordpress para cá. Não fiz a migração dos comentários ainda. Vou fazer em breve :P</p>

<p>A migração mais importante ainda foi a do TrendTime. Vou contar um pouco de história!</p>

<p>Nós começamos o TrendTime como brincadeira, e como tal não escolhemos um banco de dados, usamos o bom e velho SQLite que com um <code>rails projeto</code> já vem configurado. E o colocamos em produção assim.</p>

<p>E com o SQLite nós cobrimos o Rails Summit Latin America 2009, Chupa Argentina, Intercon 2009, Ceará On Rails, Flex for Kids 2010, PyCon 2010 Atlanta e até o Big Brother Brasil.</p>

<p>Nós migramos para o MySQL quando o SQLite não estava mais aguentando a inserção dos dados do Big Brother, que apesar de não ser um TrendTopic, é um case muito bom de análise de tweets, por quê é uma hash que é usada massivamente enquanto o programa está passando na TV.</p>

<p>Neste ponto, nós começamos a ter problemas com crons que não finalizavam, inserção de múltiplos resultados no banco, além da lentidão em indexar 100 novos tweets. Mesmo depois da migração para o MySQL continuamos com esses problemas.</p>

<p>Então nessa última semana resolvemos migrar para o MongoDB. Nós temos experiência com CouchDB usando CouchRest, mas a migração para o MongoDB com MongoMapper foi muito mais rápida do que esperávamos. Além disso, nos testes iniciais tivemos uma percepção de velocidade maior do que com couchdb. Esses fatores foram decisivos para a migração.</p>

<p>Além da migração para MongoDB, nós fizemos ajustes na nossa biblioteca de busca ao Twitter e agora temos uma cron específica para a indexação dos usuários. Com isso conseguimos mais requisições livres para o Twitter (Ainda estamos com a limitação padrão)</p>

<p>Por falar em velocidade, a migração do MySQL para MongoDB foi mais rápida do que a migração do SQLite para o MySQL (Escrita, a leitura é praticamente a mesma velocidade).</p>

<p>Vamos testando o MongoDB. Se precisarmos mudar de banco, seja para outro NoSQL ou para um novo paradigma, ou até voltando para um banco de dados relacionais, vamos fazer e vocês nem vão perceber quando migrarmos. :)</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Colhendo frutos do Pomodoro]]></title>
    <link href="http://caironoleto.github.com/2009/11/23/colhendo-frutos-do-pomodoro/"/>
    <updated>2009-11-23T00:00:00-03:00</updated>
    <id>http://caironoleto.github.com/2009/11/23/colhendo-frutos-do-pomodoro</id>
    <content type="html"><![CDATA[<p>A pouco tempo eu comecei com essa história de <a href="http://www.pomodorotechnique.com">Pomodoro</a>. Eu já conhecia a técnica faz tempos, desde o ano passado. Na época ela passou como mais uma metodologia de concentração e foco, mas agora voltou então resolvi da uma chance ao Pomodoro.</p>

<p>As regras do Pomodoro são simples:</p>

<p>Priorize suas tarefas logo no inicio do dia;</p>

<p>Você vai ter um intervalo de 25 minutos para resolver todas as tarefas, após esse tempo você descansa 5 minutos. Após 4 pomodoros (Que são 30 minutos - 25 da tarefa e 5 do descanso) você deve descansar por mais tempo, por 20 minutos;</p>

<p>Ao final de cada pomodoro, marque com um x ao lado da tarefa, ao concluir risque-a da lista.</p>

<p>Claro que não entrei em detalhes nas regras, mas basicamente é isso. Sem mistério, simples e direto ao ponto. O único material que você precisa é de uma caneta e de um contador regressivo programável (25, 5 e 20 minutos) que tenha alarme.</p>

<p>O principal ponto que eu notei sobre o pomodoro é que eu sei quanto tempo eu gasto por cada tarefa. Contando as horas que eu trabalho por dia isso é muito importante, se aplicarmos o mesmo principio do gerenciamento financeiro, você não sabe que tem um problema até que você comece a contabilizar o quanto é o tamanho do seu problema.</p>

<p>Usar o pomodoro me fez ter algumas estatísticas interessantes, por exemplo, no período da manhã é o horário onde eu gasto menos pomodoros (Isso quer dizer menos produtividade). O período da tarde é o que eu mais faço pomodoros, mas não muitos, variam entre 4 a 6. Eu sei que da pra fazer até 8 pomodoros.</p>

<p>Em casa é o ambiente onde eu tenho o maior número de distrações. No trabalho eu tenho bem menos distrações, mas tenho o maior número de pomodoros interrrompidos.</p>

<p>E por último outra coisa legal, você começa a identificar as tarefas comuns e começa a medir a quantidade de pomodoros para completar uma tarefa, isso faz com que você possa se organizar melhor (Se você sabe que tem apenas 2 pomodoros disponíveis, você então faz uma tarefa que vá levar 2 pomodoros).</p>

<p>Eu realmente indico o pomodoro para quem não tem noção nenhuma de onde você gasta suas horas. Recomendo que você leia todo o livro antes, mas não precisa para começar a usar. Ler sobre as interrupções é importante, saber lidar com ela é muito importante.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Rails Summit 2009 e o lançamento do TrendTi.me!]]></title>
    <link href="http://caironoleto.github.com/2009/10/16/rails-summit-2009-e-o-lancamento-do-trendti-me/"/>
    <updated>2009-10-16T00:00:00-03:00</updated>
    <id>http://caironoleto.github.com/2009/10/16/rails-summit-2009-e-o-lancamento-do-trendti-me</id>
    <content type="html"><![CDATA[<p>Este ano o Rails Summit se consolidou como um dos maiores eventos de Rails do mundo. Infelizmente mais uma vez não pude ir e participar presencialmente ao evento, mas nem por isso eu não participei!</p>

<p>No Oxente Rails, evento realizado em Natal - RN, eu, Cleiton, Weldys e Cyrus começamos uma aplicação por brincadeira e zoação, nós criamos um livestream, foram 2 dias de muito trabalho e pouco descanço.</p>

<p>Na volta pra casa nós discutimos bastante sobre os rumos do livestream mas não chegamos a nenhum ponto. Logo no mês seguinte participamos do Rails For Kids, e mais uma vez estávamos com nosso Livestream, e dois dias depois nós cobrimos o Dev In Rio.</p>

<p>A cada novo evento nos surgiam mais e mais idéias, surgiram mais e mais feedback nesse tempo todo e resolvemos que iríamos fazer uma aplicação, bem estilo web x.0 e bem cara de Rails.</p>

<p>Daí surgiu a idéia do <a href="http://trendti.me/">TrendTi.me</a>, que é um stream ao vivo do que acontece sobre um determinado assunto em vários canais da mídia. Inicialmente estamos cobrindo tudo que acontece no twitter, flickr e youtube.</p>

<p>Nós marcamos a estréia do TrendTi.me no maior evento de Rails do Brasil, o Rails Summit.</p>

<p>A cada dia nós temos mais e mais idéias, estamos anotando tudo para implementar! Estamos com um bom roadmap, a equipe ta ótima e o desenvolvimento melhor ainda!</p>

<p>Em breve terei mais novidades sobre o TrendTi.me!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Dois programadores pensam melhor do que um]]></title>
    <link href="http://caironoleto.github.com/2009/09/03/dois-programadores-pensam-melhor-do-que-um/"/>
    <updated>2009-09-03T00:00:00-03:00</updated>
    <id>http://caironoleto.github.com/2009/09/03/dois-programadores-pensam-melhor-do-que-um</id>
    <content type="html"><![CDATA[<p>O XP é uma metodologia de desenvolvimento Ágil, alguns consideram como framework, outros, assim como eu, consideram como filosofia. Não da dá pra aprender XP em um dia e no segundo dia sua equipe já será extremamente Ágil. Isso é mentira. Assim como programação, XP só se aprende com o tempo, treinando dia após dia.</p>

<p>O XP possui práticas e dentre elas a que eu acho mais vantajosa é a Programação em Par, que é a atividade onde dois programadores usam um computador e eles codificam juntos. Eu, quando comecei minha vida no desenvolvimento, não colocava muita fé nesse tipo de desenvolvimento. Cheguei a espalhar para outros programadores que duas pessoas em um computador não funcionava, e que seriam melhor um programador por computador.</p>

<p>Esse é o pensamento Taylor de desenvolvimento de software ainda presente em várias empresas no mundo onde duas pessoas, cada um fazendo o seu trabalho, são mais eficientes do que as duas em um único computador. Quem tem mais experiência com desenvolvimento de software sabe que isso é uma afirmação falsa. Pode sim duas pessoas em um computador ser melhor do que uma.</p>

<p>O fato é que duas pessoas se motivam para desenvolver. Como estão em par, ver email, olhar os twitts, ler feeds, não entra nesse tipo de desenvolvimento. Em par, as distrações são menores porquê quem está desenvolvendo está preocupado apenas no código, e fica um dando pilha para o outro.</p>

<p>O design da solução se torna melhor e mais consistente. Aquele velho ditado popular que diz que duas cabeças pensam melhor do que uma é verdade, dois programadores pensam melhor na solução do problema, discutem mais, avaliam mais os riscos, escrevem melhor os testes.</p>

<p>Na equipe você acaba com ilhas de conhecimento. Programação em par é uma prática que se faz em no máximo algumas horas, então você sempre estará trocando de par e assim estará compartilhando mais rápido o conhecimento do negócio entre a equipe.</p>

<p>Uma outra vantagem é o codigo compartilhado, a prática ajuda para que todos saibam o que está sendo feito em cada parte do código, assim faz com que acabe o &#8220;Dono do código&#8221;, já que toda a equipe fez parte do desenvolvimento.</p>

<p>Ainda assim, alguns programadores não gostam de fazer programação em par, nesses casos não se pode forçar a barra. Faça apenas com que eles saibam que valores eles estarão perdendo. Não o demita só porquê ele não faz programação em par, talvez ela realmente seja bom sozinho. Mas faça com que ele compartilhe o código, que ele não crie ilha de conhecimento e que se comunique ao máximo com a sua equipe.</p>

<p>Mesmo que sua empresa não adote uma metodologia, eu recomendo que você a adote no seu dia a dia . A curto prazo você pode ter a sensação de que não está evoluindo muito, mas a médio e longo prazo, você, sua equipe e sua empresa começarão a ter o retorno mais rápido e a satisfação no desenvolvimento será bem maior.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[O mais importante é arte e não código!]]></title>
    <link href="http://caironoleto.github.com/2009/09/02/o-mais-importante-e-arte-e-nao-codigo/"/>
    <updated>2009-09-02T00:00:00-03:00</updated>
    <id>http://caironoleto.github.com/2009/09/02/o-mais-importante-e-arte-e-nao-codigo</id>
    <content type="html"><![CDATA[<p>Nos últimos dias eu venho tentando aprender a fazer design sozinho. E sinceramente, design é algo que se aprende, mas é muito difícil. Não é tão simples como programação, aprender meio número de comandos e escrevê-los.</p>

<p>Se fosse assim, já estaria com o design que eu quero pronto. Mas não, não é tão simples. Falo sinceramente quando uma pessoa que sabe fazer design e é programador é um profissional completo.</p>

<p>Desing é mais complexo do que muitos pensam. Não é apenas colocar alguns formulários e pronto! Não, longe disso. Você tem que entender de cores, de tamanhos, de posição. Depois você tem que entender de usabilidade, saber que botão é melhor para colocar aqui, ou para colocar ali.</p>

<p>Eu tenho noção de usabilidade. Sei que posicionar um botão num lugar errado pode fazer com que os clientes não saibam usar o seu produto. Sei que isso é o que define o seu produto e sinceramente, eu vejo poucas empresas que apostam alto nessa parte que eu considero importante.</p>

<p>Não basta que a coisa seja bonita, ela tem que ser funcional, e o mais importante, o seu cliente tem que saber usar sem precisar de um manual.</p>

<p>Quando um programador, como eu, tento fazer um desing de um produto, eu só consigo pensar nas funcionalidades que eu vou implementar com JavaScript, ou o banco de dados que eu vou usar para armazenar os dados. Eu não consigo imaginar mais, não porquê eu não saiba (Tá, eu não sei, AINDA! ;) mas porquê como programador, eu não prático isso no meu dia-a-dia.</p>

<p>Para um designer é fácil ele fazer isso, é a profissão dele. É a mesma coisa, ele não conhece programação para poder fazer o meu trabalho. Se ele sabe, com certeza, para ele é mais fácil saber o que deve fazer.</p>

<p>Lembro muito bem no livro da 37 Signals, Getting Real, onde eles falam que a melhor coisa que você faz no seu produto é começar pelo mais importante, o que seus clientes irão ver. O mais importante dessa abordagem é que você, como programador, só vai implementar o que é essencial para o produto funcionar. Nem uma linha a mais, nenhuma a menos.</p>

<p>A 37 Signals sabe que isso fará com que seu produto seja o mais simples possível. É verdade, o produto será. Mas por quê você apenas faz o essencial, não mais do que você vê. Para o seu cliente é a melhor abordagem! Em menos tempo ele tem o seu produto funcionando, com todos os recursos possíveis.</p>

<p>Foi nessa filosofia que o Rails foi desenvolvido. Não apenas para ser rápido, mas para está preparado para as mudanças do cliente. Em alguns minutos é possível mudar a forma como os dados estão sendo mostrados no Rails, mais uma vez, não apenas por que ele já é rápido e já vem com várias coisas disponíveis para que você faça a coisa mais rápido, mas por quê ele foi desenhado para que isso seja feito de forma rápida e sem dor, porquê foi essa praticidade que a 37 Signals estava precisando para resolver o seu problema.</p>

<p>Vai começar um novo produto e já escolheu o banco de dados, criou os models mas nem imagina como está as telas?! Peço que você reconsidere todo o seu trabalho, pois tenho certeza que esse seu produto não vai ser tão recompensante do que se você começar pelo design.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Aprendendo Agilidade fora da caixa]]></title>
    <link href="http://caironoleto.github.com/2009/09/01/aprendendo-agilidade-fora-da-caixa/"/>
    <updated>2009-09-01T00:00:00-03:00</updated>
    <id>http://caironoleto.github.com/2009/09/01/aprendendo-agilidade-fora-da-caixa</id>
    <content type="html"><![CDATA[<p>Podemos aprender em qualquer lugar, com qualquer coisa. Livros, vídeos, fotos, apresentações, músicas, filmes, etc. Se você ver a coisa com outra ótica poderá aprender muito.</p>

<p>Eu gosto muito de ver o filme do Homem de Ferro, gosto muito de ver toda aquela coisa tecnologica funcionando. Acho o máximo quando ele usa o &#8220;raio repulsor&#8221; e passa da barreira do som!</p>

<p>O mais importante de se tirar dessa história, é como uma equipe motivada pode ser melhor do que meia duzia de ótimos profissionais.</p>

<p>Tony Stark estava entre a vida e a morte, sem recursos e com uma equipe reduzida (Ele e Yin Sen). Yin Sen inventa um aparelho para manter o coração do Tony Stark batendo. Depois disso, Tony Stark inventa uma armadura para libertar os dois dali.</p>

<p>A versão 1.0 da armadura é cheia de bugs e nem se parece com a última versão do filme. Ela não é muito resistente nem tão Ágil, mas é com ela que Tony Stark foge.</p>

<p>Até aqui, a história dele é bem parecida com várias start ups pelo mundo. Pouco recursos, equipe motivada, velocidade para ter um primeiro release, bugs e mais bugs.</p>

<p>Quando ele sai, ele &#8220;recebe&#8221; investimento. Aprimora sua armadura e torna ela forte, resistente e Ágil.</p>

<p>Esse mesmo estágio acontece com algumas start ups, elas crescem, recebem investimentos ou começam a ter retorno. Geralmente, neste ponto, é que muitas start ups mudam! Aumentam o quadro de funcionários, crescem, mudam de atitude. Outras não, continuam com a mesma equipe, apenas melhoram a motivação, que além de lançar um produto, agora tem um incentivo financeiro.</p>

<p>A 37 Signals sabe, pequenas equipes, mas extremamentes motivadas são melhores do uma &#8220;IBM&#8221; da vida sem motivação. E isso acontece no filme.</p>

<p>Tony Stark durante o filme tem um concorrente, Obadiah Stane. Ele junta os melhores engenheiros que o dinheiro pode pagar. Esses engenheiros não conseguem reproduzir o mesmo equipamento que Tony Stark possui. Para ter a primeira versão do Monge de Ferro ele tem que roubar o dispositivo do Tony para fazer a máquina dele funcionar.</p>

<p>Isso geralmente acontece em grandes corporações. Empresas como Microsoft, Google, que não tem mais a mesma agilidade que possuiam quando começaram. Elas se tornaram grandes, com milhares de processos e camadas. Para inovar, elas precisam gastar muitos recursos e ter muitos profissionais.</p>

<p>Diferente das pequenas empresas, que com poucos recursos e com muita motivação conseguem fazer produtos de sucesso. Aprender a motivar a sua equipe pode ser mais importante do que fazer um ótimo produto. Sem uma equipe motivada, o melhor dos produtos terá uma péssima execução e assim não terá o retorno esperado. Produtos médios mas com uma ótima execução vão ser muito mais lucrativos.</p>

<p>Fica a dica, tente aprender pensando fora da caixa, existe muito mais valores que você pode detectar em outras coisas que você nem esperava encontrar!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Rails Initializers!]]></title>
    <link href="http://caironoleto.github.com/2009/08/31/rails-initializers/"/>
    <updated>2009-08-31T00:00:00-03:00</updated>
    <id>http://caironoleto.github.com/2009/08/31/rails-initializers</id>
    <content type="html"><![CDATA[<p>No rails existem 4 lugares onde você pode configurar sua aplicação, no config/environment.rb, config/environments/production.rb, config/environments/development.rb, config/environments/test.rb.</p>

<p>Nesses 4 lugares você pode adicionar configurações para um do environments do rails (production, test e development) ou em todos os environments (config/environment.rb).</p>

<p>Dentro desses arquivos, você pode configurar gems específicas para cada environment, ou para toda a aplicação. Mas uma coisa que muitos fazem é centralizar nesses locais configurações de inicialização de constantes, de conexões com serviços externos, monkey patches entre outros.</p>

<p>Recentemente estou desenvolvendo um projeto e brincando com <a href="http://couchdb.apache.org">Apache CouchDB</a> e <a href="http://github.com/mattetti/couchrest/tree/master">CouchRest</a>. No CouchRest eu resolvi fazer um monkey patch e na hora de colocar eu não sabia a melhor forma. Depois de um pouco de buscas no google lembrei do <code>config/initializers/</code>.</p>

<p>Nesse lugar é onde você deve colocar as coisas que vão ser inicializadas junto com o Rails. Todos os arquivos serão executados após o carregamento dos plugins.</p>

<p>Por exemplo, você pode inicializar o MemCached, fazer com que ele conecte nos 4 servidores de cache que você tem, limpar a cache e colocar na cache toda a sua aplicação.</p>

<p>Ou você pode fazer um monkey patch.</p>

<p>Assim você mantem seus environments limpos.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Rails 4 kids. Ajude!]]></title>
    <link href="http://caironoleto.github.com/2009/08/29/rails-4-kids/"/>
    <updated>2009-08-29T00:00:00-03:00</updated>
    <id>http://caironoleto.github.com/2009/08/29/rails-4-kids</id>
    <content type="html"><![CDATA[<p><a href="http://www.railsforkids.com/">Rails for Kids</a> é uma iniciativa muito bacana do <a href="http://www.egenial.com.br/">Carlos Eduardo, da e-Genial</a>. Quem não sabe ou não lembra, o Rails for Kids é um dia inteiro com muito Rails e toda a renda é para ajudar uma instituição que cuida de crianças.</p>

<p>Esse ano a instituição escolhida foi a Cotolengo. Sobre o evento, vai contar com os mais importantes Railers do Brasil, vai ser um puta grande evento sobre Rails. Vamos ajudar as crianças e vamos ganhar conhecimento que é o este Brasil esta precisando, principalmente nosso estúpido senado.</p>

<p>O Rails 4 kids acontecerá no dia 12 de setembro, não fique de fora dessa, não perca essa oportunidade de ajudar as crianças e poder contar com um dia inteiro de rails com os melhores do Brasil, faça já <a href="http://www.railsforkids.com/inscriptions">sua inscrição</a>.</p>
]]></content>
  </entry>
  
</feed>
