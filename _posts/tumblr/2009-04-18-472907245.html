---
layout: post
title: Instalando Nginx com Passenger
---

<p>Para quem acompanha o mundo <a title="Ruby On Rails" href="http://www.rubyonrails.com" target="_blank">Ruby On Rails</a> soube que no dia 16 foi <a title="Phusion’s One Year Anniversary Gift: Phusion Passenger 2.2.0" href="http://blog.phusion.nl/2009/04/16/phusions-one-year-anniversary-gift-phusion-passenger-220/" target="_blank">lançado</a> o <a title="Passenger (A.k.a. ModRails)" href="http://www.modrails.com" target="_blank">Passenger</a> com suporte total para <a title="Nginx" href="http://nginx.net/" target="_blank">Nginx</a> (Lê-se <em>Engine X</em>). Assim temos mais uma rápida opção de deployment para Ruby On Rails.</p>

<p>Para instalar, primeiro instala a gem do Passenger</p>

<blockquote><p><em>sudo gem install passenger</em></p></blockquote>

<p>O Passenger gera o instalador fácil para Nginx e para o Apache, no nosso caso só digitarmos</p>

<blockquote><p><em>sudo passenger-install-nginx-module</em></p></blockquote>

<p>Nessa parte eu estava obtendo um erro e não estava instalando o Nginx e <a title="Passenger Fix Bug" href="http://github.com/FooBarWidget/passenger/commit/7a9092a560de4f2096a73fc39375260f827f6153" target="_blank">aqui</a> <a title="Issue 249: passenger/nginx fails to build" href="http://code.google.com/p/phusion-passenger/issues/detail?id=249" target="_blank">nessa</a> <a title="Passenger 2.2.0 install problem in Ubuntu 8.10" href="http://groups.google.com/group/phusion-passenger/browse_thread/thread/cbf0ed3f143e01fc" target="_blank">thread</a> os Phusion&#8217;s Guys resolveram o problema. Então eu fiz um clone do <a title="Passenger On GitHub" href="http://github.com/FooBarWidget/passenger/" target="_blank">projeto que ta no github</a> e rodei um <em>rake package</em> para gerar a gem com a modificação e fiz a instalação da gem e tudo foi resolvido.</p>

<p>Após isso é só configurar o Nginx, que por padrão é instalado em /opt/nginx. Para fazer o deploy é simples, adicione o seguinte código em /opt/nginx/conf/nginx.conf (altere a pasta conforme onde você instalou o Nginx)<br/><script src="http://gist.github.com/97676.js"></script></p>

<p>Para completar, eu fiz um script onde posso iniciar, parar ou reiniciar o servidor</p>

<p><script src="http://gist.github.com/97679.js"></script></p>

<p>Você pode colocar a inicialização automaticamente no servidor</p>

<blockquote><p><em>sudo update-rc.d nginx defaults</em></p></blockquote>

<p>Depois é só inicializar o servidor e pronto.</p>
