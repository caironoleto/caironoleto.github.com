---
layout: post
title: Extraindo informações usando Ruby
---

<p>Hoje lancei <a target="_blank" href="http://hackmarkoapp.heroku.com/">uma aplicação</a> que faz a análise dos palpites de um bolão (<a target="_blank" href="http://www.bolaodamarko.com.br">O bolão da Marko Informática</a>) e mostra um gráfico com a quantidade de palpites por placa em um determinado jogo.</p>

<p>Para extrair essas informações eu não precisei acessar o banco de dados. Apenas consumi o que todos já podem ver, como por exemplo este <a target="_blank" href="http://www.bolaodamarko.com.br/palpitejogo.php?jogo=84">link</a>.</p>

<p>Essa brincadeira de extrair essas informações do bolão da Marko Informática começou com uma dúvida da minha esposa, <a target="_blank" href="http://twitter.com/tatyemerito">Tatyana Emérito</a>, se tinha condição de ver no site os palpites dos outros participantes. Em menos de cinco minutos depois eu vi que tinha a possibilidade de ver essa informação como vocês podem ver neste <a target="_blank" href="http://www.bolaodamarko.com.br/palpitejogo.php?jogo=84">link</a>, mas que infelizmente para mim é irrelevante.</p>

<p>Essa informação é desorganizada e não vai me ajudar a tomar uma decisão quanto aos meus palpites. Para mim é mais importante ter esses dados sumarizados de forma que eu não perca tempo analisando todos os palpites, um por um. Então, organizar a informação para que eu saiba quantos apostaram em 2x1 é mais interessante do que ter que contabilizar isso manualmente.</p>

<p>Para fazer isso em ruby eu utilizo a <em>gem <a target="_blank" href="http://nokogiri.org/">nokogiri</a></em>, que faz justamente a análise e busca em html/xml. Com ela eu posso facilmente consumir o conteúdo de uma página e extrair os dados que realmente importa.</p>

<p>Nada muito complexo de se aprender, como você pode ver <a target="_blank" href="http://gist.github.com/457000">aqui</a>.</p>

<p>Eu pensei em fazer usando o <a target="_blank" href="http://rubyonrails.org/">Rails 3</a>, mas depois de fazer o primeiro protótipo, vi que não seria necessária algo tão grande, então tirei o Rails e coloquei o <a target="_blank" href="http://www.sinatrarb.com/">Sinatra</a>.</p>

<p>Para montar o gráfico eu perguntei no <a target="_blank" href="http://twitter.com/caironoleto/status/17247543986">Twitter</a> quem indicaria bibliotecas js que fizessem Chart. Depois de olhar todas, a do <a target="_blank" href="http://code.google.com/apis/charttools/index.html">Google Charts</a> foi a que eu achei mais simples e sem burocracia para colocar no site.</p>

<p>E por fim, para fazer deploy da aplicação eu usei o <a target="_blank" href="http://heroku.com/">Heroku</a>, que é um serviço Cloud para aplicações em Ruby.</p>
